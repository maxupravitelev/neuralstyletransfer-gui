(this["webpackJsonpnst-transfer-frontend"]=this["webpackJsonpnst-transfer-frontend"]||[]).push([[0],{54:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n(16),i=n.n(c),s=(n(54),n(13)),o=n.n(s),l=n(19),u=n(14),j=n(5),d=n(17),b=n(99),m=n(100),g=n(101),O={padding:"1.5em",margin:"0.5em",backgroundColor:"#FBFBFF",textAlign:"center",borderWidth:"2px",width:"auto"},h={elevatedDiv:O,container:{width:"500px",margin:"0em auto 1em"},fileSelector:Object(j.a)({},O),imagePreviewContainer:Object(j.a)(Object(j.a)({},O),{},{backgroundColor:"#EEEEEE",padding:"1em"}),imagePreview:{width:"100%",maxWidth:"450px"},header:Object(j.a)(Object(j.a)({},O),{},{marginTop:"10em"}),statusBar:Object(j.a)({},O)},p=n(2),f=Object(g.a)(h),v=function(e){var t=e.handleChange,n=e.imageFormSet,a=e.image,r=f();return Object(p.jsxs)("div",{className:r.imagePreviewContainer,children:[Object(p.jsx)("input",{type:"file",name:"contentImage",accept:"image/*",id:"contentImage",style:{display:"none"},onChange:t}),Object(p.jsxs)("label",{htmlFor:"contentImage",children:[n.contentImage&&Object(p.jsx)("img",{src:a.contentImage,alt:"original",className:r.imagePreview}),Object(p.jsx)("p",{}),Object(p.jsx)(b.a,{children:"Please choose a file you want to stylize"}),Object(p.jsx)(m.a,{variant:"outlined",component:"span",children:"Upload"})]})]})},x=Object(g.a)(h),y=function(e){var t=e.handleChange,n=e.imageFormSet,a=e.image,r=x();return Object(p.jsxs)("div",{className:r.imagePreviewContainer,children:[Object(p.jsx)("input",{type:"file",name:"styleImage",accept:"image/*",id:"styleImage",style:{display:"none"},onChange:t}),Object(p.jsxs)("label",{htmlFor:"styleImage",children:[n.styleImage&&Object(p.jsx)("img",{src:a.styleImage,alt:"reference",className:r.imagePreview}),Object(p.jsx)(b.a,{children:"Please choose a style reference file"}),Object(p.jsx)(m.a,{variant:"outlined",component:"span",children:"Upload"})]})]})},I=n(15),E=n(102),T=function(){var e=Object(I.c)((function(e){return e.notification}));return e?Object(p.jsx)("div",{children:Object(p.jsx)(E.a,{severity:e.severity,children:e.notification})}):Object(p.jsx)("div",{})},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFICATION":return t.notification;default:return e}},N={url:"",generatingMessage:""},S=function(e){return function(t){t({type:"GET_GENERATED_IMAGE_URL",data:e})}},k=function(e){return function(t){t({type:"SET_GENERATING_MESSAGE",data:e})}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GENERATED_IMAGE_URL":return Object(j.a)(Object(j.a)({},e),{},{url:t.data});case"SET_GENERATING_MESSAGE":return Object(j.a)(Object(j.a)({},e),{},{generatingMessage:t.data});default:return e}},A=n(31),P=n.n(A),F=n(44),G=n.n(F),R="https://nstbackend.herokuapp.com",_={getPingFromBackend:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.a.get(R);case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","error");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),uploadImagesToBackend:function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new G.a(t),a={headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Content-Type":"multipart/form-data"}},r=P.a.post("https://nstbackend.herokuapp.com/api/images",n,a),e.next=5,r;case 5:return c=e.sent,e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},B=Object(g.a)(h),M=function(){var e=B(),t=Object(I.b)(),n=Object(r.useState)({contentImage:!1,styleImage:!1}),c=Object(d.a)(n,2),i=c[0],s=c[1],b=Object(r.useState)({contentImage:null,styleImage:null}),g=Object(d.a)(b,2),O=g[0],h=g[1],f=function(e){if(0!==e.target.files.length){var n=e.target.name;h(Object(j.a)(Object(j.a)({},O),{},Object(u.a)({},n,URL.createObjectURL(e.target.files[0])))),s(Object(j.a)(Object(j.a)({},i),{},Object(u.a)({},n,!0))),t((r="".concat(n," set"),c=3,o="success",function(e){e({type:"NOTIFICATION",notification:{notification:r,severity:o}}),clearTimeout(a),a=setTimeout((function(){e({type:"NOTIFICATION",notification:null})}),1e3*c)}))}var r,c,o},x=function(){var e=Object(l.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t(k("Image is being generated on the server. This might take a moment...")),e.next=4,_.uploadImagesToBackend(n.target);case 4:a=e.sent,t(S("https://nstbackend.herokuapp.com/api/images/generated_output/?filename="+a)),t(k(""));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:x,className:e.fileSelector,encType:"multipart/form-data",children:[Object(p.jsx)(T,{}),Object(p.jsx)(v,{handleChange:f,imageFormSet:i,image:O}),Object(p.jsx)(y,{handleChange:f,imageFormSet:i,image:O}),Object(p.jsx)("div",{children:Object(p.jsx)(m.a,{type:"submit",variant:"outlined",children:"GENERATE"})})]})},D=Object(g.a)(h),U=function(){var e=D(),t=Object(I.c)((function(e){return e.generatedImage.url})),n=Object(I.c)((function(e){return e.generatedImage.generatingMessage}));return Object(p.jsxs)("div",{className:e.elevatedDiv,children:[t&&Object(p.jsx)("img",{src:t,alt:"generated content",className:e.imagePreview}),Object(p.jsx)("div",{children:Object(p.jsx)(b.a,{children:n})})]})},L=function(){var e=Object(r.useState)("red"),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("Trying to reach server..."),i=Object(d.a)(c,2),s=i[0],u=i[1];Object(r.useEffect)((function(){(function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getPingFromBackend();case 2:"ping"===e.sent?(a("green"),u("Server is online.")):(a("red"),u("Server could not be reached. Please contact the admin."));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var j={backgroundColor:n,borderRadius:"50%",height:"2em",width:"2em",display:"inline-block",margin:"auto",marginRight:5};return Object(p.jsxs)("div",{style:{alighItems:"center"},children:[Object(p.jsx)("div",{style:j}),Object(p.jsx)(b.a,{children:s})]})},W=Object(g.a)(h),z=function(){var e=W();return Object(p.jsx)("div",{className:e.statusBar,children:Object(p.jsx)(L,{})})},J=Object(g.a)(h),H=function(){var e=J();return Object(p.jsxs)("div",{className:e.header,children:[Object(p.jsx)(b.a,{variant:"h4",component:"h2",children:"Neural Style Transfer"}),Object(p.jsxs)(b.a,{style:{marginTop:"0.5em"},children:["Generate an image in the style of a reference image by utilizing ",Object(p.jsx)("a",{href:"https://www.tensorflow.org/tutorials/generative/style_transfer",children:"neural style transfer"}),"."]})]})},q=Object(g.a)(h),K=function(){var e=q();return Object(p.jsxs)("div",{className:e.container,children:[Object(p.jsx)(H,{}),Object(p.jsx)(z,{}),Object(p.jsx)(M,{}),Object(p.jsx)(U,{})]})},Q=n(28),V=n(45),X=n(46),Y=Object(Q.combineReducers)({notification:w,generatedImage:C}),Z=Object(Q.createStore)(Y,Object(V.composeWithDevTools)(Object(Q.applyMiddleware)(X.a)));i.a.render(Object(p.jsx)(I.a,{store:Z,children:Object(p.jsx)(K,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.f2356034.chunk.js.map